function toggleClasses(t){!0===t?($(".mainField__wrapper__rightBlock--products").removeClass("productHorizontal"),$(".infoProduct").removeClass("infoProductHorizontal"),$(".imgProduct").removeClass("imgProductHorizontal"),$(".mainField__wrapper__rightBlock--products .imgProduct img").removeClass("imgProductHorizontal__img"),$(".mainField__wrapper__rightBlock--products .imgProduct__akcii").removeClass("imgProductHorizontal__akcii"),$(".mainField__wrapper__rightBlock--products .imgProduct__podarok").removeClass("imgProductHorizontal__podarok"),$(".mainField__wrapper__rightBlock--products .raitingProduct").removeClass("raitingsHorizontal"),$(".nameProduct").removeClass("nameProductHorizontal"),$(".nameProduct__miniDescription").removeClass("dispBlok"),$(".priceButtonProduct").removeClass("dispBlokN"),$(".attributeProduct").removeClass("attributeProductHorizontal"),$(".attributeProduct__block").removeClass("attributeProductHorizontal__block"),$(".bottomBlockProduct__variation__colors").removeClass("dispBlok"),$(".bottomBlockProduct").removeClass("bottomBlockProductHorizontal"),$(".bottomBlockProduct__featuresHorizontal").removeClass("dispBlok"),$(".bottomBlockProduct__features").removeClass("dispBlokN"),$(".rightBlockHorizontal").removeClass("dispBlok"),$(".bottomRightHorizontal").removeClass("dispBlok"),$(".mainField__wrapper__rightBlock--products .bottomBlockProduct__comparePrices").removeClass("dispBlokN"),$(".bottomRightHorizontal__raitingProduct").removeClass("dispBlok")):($(".mainField__wrapper__rightBlock--products").addClass("productHorizontal"),$(".infoProduct").addClass("infoProductHorizontal"),$(".imgProduct").addClass("imgProductHorizontal"),$(".mainField__wrapper__rightBlock--products .imgProduct img").addClass("imgProductHorizontal__img"),$(".mainField__wrapper__rightBlock--products .imgProduct__akcii").addClass("imgProductHorizontal__akcii"),$(".mainField__wrapper__rightBlock--products .imgProduct__podarok").addClass("imgProductHorizontal__podarok"),$(".mainField__wrapper__rightBlock--products .raitingProduct").addClass("raitingsHorizontal"),$(".nameProduct").addClass("nameProductHorizontal"),$(".nameProduct__miniDescription").addClass("dispBlok"),$(".priceButtonProduct").addClass("dispBlokN"),$(".attributeProduct").addClass("attributeProductHorizontal"),$(".attributeProduct__block").addClass("attributeProductHorizontal__block"),$(".bottomBlockProduct__variation__colors").addClass("dispBlok"),$(".bottomBlockProduct").addClass("bottomBlockProductHorizontal"),$(".bottomBlockProduct__featuresHorizontal").addClass("dispBlok"),$(".bottomBlockProduct__features").addClass("dispBlokN"),$(".rightBlockHorizontal").addClass("dispBlok"),$(".bottomRightHorizontal").addClass("dispBlok"),$(".mainField__wrapper__rightBlock--products .bottomBlockProduct__comparePrices").addClass("dispBlokN"),$(".bottomRightHorizontal__raitingProduct").addClass("dispBlok"))}!function(t,e,i,n){var o=function(t,e){function i(){}var n;return i.prototype.make=function(i){return e.Run.canProcess()?(n=void 0!==i?parseInt(i):0,this[t.options.type](),this):e.Arrows.disable()},i.prototype.after=function(e){return setTimeout(function(){e()},t.options.animationDuration+20)},i.prototype.slider=function(){var i=t[t.size]*(t.current-1),o=e.Clones.shift-t.paddings;e.Run.isStart()?(o=t.options.centered?Math.abs(o):0,e.Arrows.disable("prev")):e.Run.isEnd()?(o=t.options.centered?Math.abs(o):Math.abs(2*o),e.Arrows.disable("next")):(o=Math.abs(o),e.Arrows.enable()),t.track.css({transition:e.Transition.get("all"),transform:e.Translate.set(t.axis,i-o-n)})},i.prototype.carousel=function(){var i,o=t[t.size]*t.current;i=t.options.centered?e.Clones.shift-t.paddings:e.Clones.shift,e.Run.isOffset("<")&&(o=0,e.Run.flag=!1,this.after(function(){t.track.css({transition:e.Transition.clear("all"),transform:e.Translate.set(t.axis,t[t.size]*t.length+i)})})),e.Run.isOffset(">")&&(o=t[t.size]*t.length+t[t.size],e.Run.flag=!1,this.after(function(){t.track.css({transition:e.Transition.clear("all"),transform:e.Translate.set(t.axis,t[t.size]+i)})})),t.track.css({transition:e.Transition.get("all"),transform:e.Translate.set(t.axis,o+i-n)})},i.prototype.slideshow=function(){t.slides.css("transition",e.Transition.get("opacity")).eq(t.current-1).css("opacity",1).siblings().css("opacity",0)},new i},r=function(t,e){function i(){}return i.prototype.instance=function(){return{current:function(){return t.current},go:function(t,i){e.Run.pause(),e.Run.make(t,i),e.Run.play()},jump:function(t,i){e.Transition.jumping=!0,e.Animation.after(function(){e.Transition.jumping=!1}),e.Run.make(t,i)},move:function(t){e.Transition.jumping=!0,e.Animation.make(t),e.Transition.jumping=!1},start:function(i){e.Run.running=!0,t.options.autoplay=parseInt(i),e.Run.play()},play:function(){return e.Run.play()},pause:function(){return e.Run.pause()},destroy:function(){e.Run.pause(),e.Clones.remove(),e.Helper.removeStyles([t.track,t.slides]),e.Bullets.remove(),t.slider.removeData("glide_api"),e.Events.unbind(),e.Touch.unbind(),e.Arrows.unbind(),e.Bullets.unbind(),t.destroyed=!0,delete t.slider,delete t.track,delete t.slides,delete t.width,delete t.length},refresh:function(){e.Run.pause(),t.collect(),t.setup(),e.Clones.remove().init(),e.Bullets.remove().init(),e.Build.init(),e.Run.make("="+parseInt(t.options.startAt),e.Run.play())}}},new i},s=function(e,i){function n(){this.build(),this.bind()}return n.prototype.build=function(){this.wrapper=e.slider.find("."+e.options.classes.arrows),this.items=this.wrapper.children()},n.prototype.disable=function(t){var n=e.options.classes;return t?void this.items.filter("."+n["arrow"+i.Helper.capitalise(t)]).unbind("click.glide touchstart.glide").addClass(n.disabled).siblings().bind("click.glide touchstart.glide",this.click).bind("mouseenter.glide",this.hover).bind("mouseleave.glide",this.hover).removeClass(n.disabled):this.disableBoth()},n.prototype.disableBoth=function(){this.items.unbind("click.glide touchstart.glide").addClass(e.options.classes.disabled)},n.prototype.enable=function(){this.bind(),this.items.removeClass(e.options.classes.disabled)},n.prototype.click=function(e){e.preventDefault(),i.Events.disabled||(i.Run.pause(),i.Run.make(t(this).data("glide-dir")),i.Animation.after(function(){i.Run.play()}))},n.prototype.hover=function(t){if(!i.Events.disabled)switch(t.type){case"mouseleave":i.Run.play();break;case"mouseenter":i.Run.pause()}},n.prototype.bind=function(){this.items.on("click.glide touchstart.glide",this.click).on("mouseenter.glide",this.hover).on("mouseleave.glide",this.hover)},n.prototype.unbind=function(){this.items.off("click.glide touchstart.glide").off("mouseenter.glide").off("mouseleave.glide")},new n},a=function(t,e){function i(){this.init()}return i.prototype.init=function(){this[t.options.type](),this.active(),e.Height.set()},i.prototype.isType=function(e){return t.options.type===e},i.prototype.isMode=function(e){return t.options.mode===e},i.prototype.slider=function(){e.Transition.jumping=!0,t.slides[t.size](t[t.size]),t.track.css(t.size,t[t.size]*t.length),this.isMode("vertical")&&e.Height.set(!0),e.Animation.make(),e.Transition.jumping=!1},i.prototype.carousel=function(){e.Transition.jumping=!0,e.Clones.shift=t[t.size]*e.Clones.items.length/2-t[t.size],t.slides[t.size](t[t.size]),t.track.css(t.size,t[t.size]*t.length+e.Clones.getGrowth()),this.isMode("vertical")&&e.Height.set(!0),e.Animation.make(),e.Clones.append(),e.Transition.jumping=!1},i.prototype.slideshow=function(){e.Transition.jumping=!0,e.Animation.make(),e.Transition.jumping=!1},i.prototype.active=function(){t.slides.eq(t.current-1).addClass(t.options.classes.active).siblings().removeClass(t.options.classes.active)},new i},l=function(e,i){function n(){this.init(),this.bind()}return n.prototype.init=function(){return this.build(),this.active(),this},n.prototype.build=function(){this.wrapper=e.slider.children("."+e.options.classes.bullets);for(var i=1;i<=e.length;i++)t("<button>",{class:e.options.classes.bullet,"data-glide-dir":"="+i}).appendTo(this.wrapper);this.items=this.wrapper.children()},n.prototype.active=function(){this.items.eq(e.current-1).addClass("active").siblings().removeClass("active")},n.prototype.remove=function(){return this.items.remove(),this},n.prototype.click=function(e){e.preventDefault(),i.Events.disabled||(i.Run.pause(),i.Run.make(t(this).data("glide-dir")),i.Animation.after(function(){i.Run.play()}))},n.prototype.hover=function(t){if(!i.Events.disabled)switch(t.type){case"mouseleave":i.Run.play();break;case"mouseenter":i.Run.pause()}},n.prototype.bind=function(){this.wrapper.on("click.glide touchstart.glide","button",this.click).on("mouseenter.glide","button",this.hover).on("mouseleave.glide","button",this.hover)},n.prototype.unbind=function(){this.wrapper.off("click.glide touchstart.glide","button").off("mouseenter.glide","button").off("mouseleave.glide","button")},new n},u=function(t,e){function i(){this.items=[],this.shift=0,this.init()}var n,o=[0,1];return i.prototype.init=function(){return this.map(),this.collect(),this},i.prototype.map=function(){var t;for(n=[],t=0;t<o.length;t++)n.push(-1-t,t)},i.prototype.collect=function(){var e,i;for(i=0;i<n.length;i++)e=t.slides.eq(n[i]).clone().addClass(t.options.classes.clone),this.items.push(e)},i.prototype.append=function(){var e,i;for(e=0;e<this.items.length;e++)i=this.items[e][t.size](t[t.size]),n[e]>=0?i.appendTo(t.track):i.prependTo(t.track)},i.prototype.remove=function(){var t;for(t=0;t<this.items.length;t++)this.items[t].remove();return this},i.prototype.getGrowth=function(){return t.width*this.items.length},new i},c=function(t,e){return new function(){for(var i in e)this[i]=new e[i](t,this)}},d=function(i,n){function o(){this.disabled=!1,this.prevented=!1,this.keyboard(),this.hoverpause(),this.resize(),this.bindTriggers(),this.bindAnchors(),this.bindImages()}var r=t("[data-glide-trigger]");return o.prototype.keyboard=function(){i.options.keyboard&&t(e).on("keyup.glide",function(t){39===t.keyCode&&n.Run.make(">"),37===t.keyCode&&n.Run.make("<")})},o.prototype.hoverpause=function(){i.options.hoverpause&&i.track.on("mouseover.glide",function(){n.Run.pause(),n.Events.trigger("mouseOver")}).on("mouseout.glide",function(){n.Run.play(),n.Events.trigger("mouseOut")})},o.prototype.resize=function(){t(e).on("resize.glide."+i.uuid,n.Helper.throttle(function(){i.destroyed||(n.Transition.jumping=!0,i.setup(),n.Build.init(),n.Run.make("="+i.current,!1),n.Run.play(),n.Transition.jumping=!1)},i.options.throttle))},o.prototype.bindTriggers=function(){r.length&&r.off("click.glide touchstart.glide").on("click.glide touchstart.glide",this.handleTrigger)},o.prototype.handleTrigger=function(e){e.preventDefault();var i=t(this).data("glide-trigger").split(" ");if(!this.disabled)for(var n in i){var o=t(i[n]).data("glide_api");o.pause(),o.go(t(this).data("glide-dir"),this.activeTrigger),o.play()}},o.prototype.bindAnchors=function(){i.track.on("click.glide","a",function(t){this.prevented&&t.preventDefault()}.bind(this))},o.prototype.bindImages=function(){i.track.on("dragstart.glide","img",function(t){this.prevented&&t.preventDefault()}.bind(this))},o.prototype.detachClicks=function(e){return i.track.find("a").each(function(e,i){t(i).attr("data-href",t(i).attr("href")).removeAttr("href")}),this},o.prototype.attachClicks=function(e){return i.track.find("a").each(function(e,i){t(i).attr("href",t(i).attr("data-href")).removeAttr("data-href")}),n.Animation.after(function(){this.prevented=!1}.bind(this)),this},o.prototype.preventClicks=function(){return this.prevented=!0,this},o.prototype.call=function(t){return"undefined"!==t&&"function"==typeof t&&t(this.getParams()),this},o.prototype.trigger=function(t){return i.slider.trigger(t+".glide",[this.getParams()]),this},o.prototype.getParams=function(){return{index:i.current,length:i.slides.length,current:i.slides.eq(i.current-1),slider:i.slider,swipe:{distance:n.Touch.distance||0}}},o.prototype.unbind=function(){i.track.off("click.glide","a").off("dragstart.glide","img").off("keyup.glide").off("mouseover.glide").off("mouseout.glide"),r.off("click.glide touchstart.glide"),t(e).off("keyup.glide").off("resize.glide."+i.uuid)},o.prototype.disable=function(){return this.disabled=!0,this},o.prototype.enable=function(){return this.disabled=!1,this},new o},p=function(t,e){function i(){t.options.autoheight&&t.wrapper.css({transition:e.Transition.get("height")})}return i.prototype.get=function(){var e="y"===t.axis?2*t.paddings:0;return t.slides.eq(t.current-1).height()+e},i.prototype.set=function(e){return!(!t.options.autoheight&&!e)&&t.wrapper.height(this.get())},new i},h=function(t,e){function i(){}return i.prototype.byAxis=function(e,i){return"y"===t.axis?i:e},i.prototype.capitalise=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},i.prototype.now=Date.now||function(){return(new Date).getTime()},i.prototype.throttle=function(t,e,i){var n,o,r,s=this,a=null,l=0;i||(i={});var u=function(){l=!1===i.leading?0:s.now(),a=null,r=t.apply(n,o),a||(n=o=null)};return function(){var c=s.now();l||!1!==i.leading||(l=c);var d=e-(c-l);return n=this,o=arguments,d<=0||d>e?(a&&(clearTimeout(a),a=null),l=c,r=t.apply(n,o),a||(n=o=null)):a||!1===i.trailing||(a=setTimeout(u,d)),r}},i.prototype.removeStyles=function(t){for(var e=0;e<t.length;e++)t[e].removeAttr("style")},new i},g=function(t,e){function i(){this.running=!1,this.flag=!1,this.play()}return i.prototype.play=function(){var e=this;if(this.canProcess())return(t.options.autoplay||this.running)&&void 0===this.interval&&(this.interval=setInterval(function(){e.pause(),e.make(">"),e.play()},this.getInterval())),this.interval},i.prototype.getInterval=function(){return parseInt(t.slides.eq(t.current-1).data("glide-autoplay"))||t.options.autoplay},i.prototype.pause=function(){return(t.options.autoplay||this.running)&&this.interval>=0&&(this.interval=clearInterval(this.interval)),this.interval},i.prototype.isStart=function(){return 1===t.current},i.prototype.isEnd=function(){return t.current===t.length},i.prototype.isOffset=function(t){return this.flag&&this.direction===t},i.prototype.make=function(i,n){var o=this;if(this.direction=i.substr(0,1),this.steps=i.substr(1)?i.substr(1):0,!this.canProcess())return this.stop();switch(t.options.hoverpause||this.pause(),!1!==n&&e.Events.disable().call(t.options.beforeTransition).trigger("beforeTransition"),this.direction){case">":this.isEnd()?(t.current=1,this.flag=!0):">"===this.steps?t.current=t.length:t.current=t.current+1;break;case"<":this.isStart()?(t.current=t.length,this.flag=!0):"<"===this.steps?t.current=1:t.current=t.current-1;break;case"=":t.current=parseInt(this.steps)}e.Height.set(),e.Bullets.active(),e.Animation.make().after(function(){e.Build.active(),!1!==n&&e.Events.enable().call(n).call(t.options.afterTransition).trigger("afterTransition"),t.options.hoverpause||o.play()}),e.Events.call(t.options.duringTransition).trigger("duringTransition")},i.prototype.stop=function(){this.pause()},i.prototype.canProcess=function(){return t.slides.length>1},new i},f=function(e,i){function n(){this.dragging=!1,e.options.touchDistance&&e.track.on({"touchstart.glide":t.proxy(this.start,this)}),e.options.dragDistance&&e.track.on({"mousedown.glide":t.proxy(this.start,this)})}var o;return n.prototype.unbind=function(){e.track.off("touchstart.glide mousedown.glide").off("touchmove.glide mousemove.glide").off("touchend.glide touchcancel.glide mouseup.glide mouseleave.glide")},n.prototype.start=function(n){i.Events.disabled||this.dragging||(o="mousedown"===n.type?n.originalEvent:n.originalEvent.touches[0]||n.originalEvent.changedTouches[0],i.Transition.jumping=!0,this.touchStartX=parseInt(o.pageX),this.touchStartY=parseInt(o.pageY),this.touchSin=null,this.dragging=!0,e.track.on({"touchmove.glide mousemove.glide":i.Helper.throttle(t.proxy(this.move,this),e.options.throttle),"touchend.glide touchcancel.glide mouseup.glide mouseleave.glide":t.proxy(this.end,this)}),i.Events.detachClicks().call(e.options.swipeStart).trigger("swipeStart"),i.Run.pause())},n.prototype.move=function(t){if(!i.Events.disabled&&this.dragging){o="mousemove"===t.type?t.originalEvent:t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];var n=parseInt(o.pageX)-this.touchStartX,r=parseInt(o.pageY)-this.touchStartY,s=Math.abs(n<<2),a=Math.abs(r<<2),l=Math.sqrt(s+a),u=Math.sqrt(i.Helper.byAxis(a,s));if(this.touchSin=Math.asin(u/l),this.distance=i.Helper.byAxis(o.pageX-this.touchStartX,o.pageY-this.touchStartY),180*this.touchSin/Math.PI<45&&i.Animation.make(i.Helper.byAxis(n,r)),i.Events.preventClicks().call(e.options.swipeMove).trigger("swipeMove"),i.Build.isMode("vertical")){if(i.Run.isStart()&&r>0)return;if(i.Run.isEnd()&&r<0)return}if(!(180*this.touchSin/Math.PI<45))return;t.stopPropagation(),t.preventDefault(),e.track.addClass(e.options.classes.dragging)}},n.prototype.end=function(t){if(!i.Events.disabled&&this.dragging){var n;o="mouseup"===t.type||"mouseleave"===t.type?t.originalEvent:t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];var r=i.Helper.byAxis(o.pageX-this.touchStartX,o.pageY-this.touchStartY),s=180*this.touchSin/Math.PI;i.Transition.jumping=!1,i.Build.isType("slider")&&(i.Run.isStart()&&r>0&&(r=0),i.Run.isEnd()&&r<0&&(r=0)),r>(n="mouseup"===t.type||"mouseleave"===t.type?e.options.dragDistance:e.options.touchDistance)&&s<45?i.Run.make("<"):r<-n&&s<45?i.Run.make(">"):i.Animation.make(),i.Animation.after(function(){i.Events.enable(),i.Run.play()}),this.dragging=!1,i.Events.attachClicks().disable().call(e.options.swipeEnd).trigger("swipeEnd"),e.track.removeClass(e.options.classes.dragging).off("touchmove.glide mousemove.glide").off("touchend.glide touchcancel.glide mouseup.glide mouseleave.glide")}},new n},m=function(t,e){function i(){this.jumping=!1}return i.prototype.get=function(e){return this.jumping?this.clear("all"):e+" "+t.options.animationDuration+"ms "+t.options.animationTimingFunc},i.prototype.clear=function(e){return e+" 0ms "+t.options.animationTimingFunc},new i},v=function(t,e){function i(){}var n={x:0,y:0,z:0};return i.prototype.set=function(t,e){return n[t]=parseInt(e),"translate3d("+-1*n.x+"px, "+-1*n.y+"px, "+-1*n.z+"px)"},new i},y=function(e,i){var n={autoplay:4e3,type:"carousel",mode:"horizontal",startAt:1,hoverpause:!0,keyboard:!0,touchDistance:80,dragDistance:120,animationDuration:400,animationTimingFunc:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",throttle:16,autoheight:!1,paddings:0,centered:!0,classes:{base:"glide",wrapper:"glide__wrapper",track:"glide__track",slide:"glide__slide",arrows:"glide__arrows",arrow:"glide__arrow",arrowNext:"next",arrowPrev:"prev",bullets:"glide__bullets",bullet:"glide__bullet",clone:"clone",active:"active",dragging:"dragging",disabled:"disabled"},beforeInit:function(t){},afterInit:function(t){},beforeTransition:function(t){},duringTransition:function(t){},afterTransition:function(t){},swipeStart:function(t){},swipeEnd:function(t){},swipeMove:function(t){}};this.options=t.extend({},n,i),this.uuid=Math.floor(1e3*Math.random()),this.current=parseInt(this.options.startAt),this.element=e,this.collect(),this.setup(),this.destroyed=!1,this.options.beforeInit({index:this.current,length:this.slides.length,current:this.slides.eq(this.current-1),slider:this.slider});var y=new c(this,{Helper:h,Translate:v,Transition:m,Arrows:s,Bullets:l,Run:g,Animation:o,Clones:u,Height:p,Build:a,Events:d,Touch:f,Api:r});return y.Events.call(this.options.afterInit),y.Api.instance()};y.prototype.collect=function(){var t=this.options,e=t.classes;this.slider=this.element.addClass(e.base+"--"+t.type).addClass(e.base+"--"+t.mode),this.track=this.slider.find("."+e.track),this.wrapper=this.slider.find("."+e.wrapper),this.slides=this.track.find("."+e.slide).not("."+e.clone)},y.prototype.setup=function(){var t={horizontal:["width","x"],vertical:["height","y"]};this.size=t[this.options.mode][0],this.axis=t[this.options.mode][1],this.length=this.slides.length,this.paddings=this.getPaddings(),this[this.size]=this.getSize()},y.prototype.getPaddings=function(){var t=this.options.paddings;if("string"==typeof t){var e=parseInt(t,10);return t.indexOf("%")>=0?parseInt(this.slider[this.size]()*(e/100)):e}return t},y.prototype.getSize=function(){return this.slider[this.size]()-2*this.paddings},t.fn.glide=function(e){return this.each(function(){t.data(this,"glide_api")||t.data(this,"glide_api",new y(t(this),e))})}}(jQuery,window,document);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){var e,i=navigator.userAgent,n=/iphone/i.test(i),o=/chrome/i.test(i),r=/android/i.test(i);t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},t.fn.extend({caret:function(t,e){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&((i=this.createTextRange()).collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(i,s){var a,l,u,c,d,p,h,g;if(!i&&this.length>0){var f=(a=t(this[0])).data(t.mask.dataName);return f?f():void 0}return s=t.extend({autoclear:t.mask.autoclear,placeholder:t.mask.placeholder,completed:null},s),l=t.mask.definitions,u=[],c=h=i.length,d=null,t.each(i.split(""),function(t,e){"?"==e?(h--,c=t):l[e]?(u.push(new RegExp(l[e])),null===d&&(d=u.length-1),c>t&&(p=u.length-1)):u.push(null)}),this.trigger("unmask").each(function(){function a(){if(s.completed){for(var t=d;p>=t;t++)if(u[t]&&z[t]===f(t))return;s.completed.call(P)}}function f(t){return s.placeholder.charAt(t<s.placeholder.length?t:0)}function m(t){for(;++t<h&&!u[t];);return t}function v(t){for(;--t>=0&&!u[t];);return t}function y(t,e){var i,n;if(!(0>t)){for(i=t,n=m(e);h>i;i++)if(u[i]){if(!(h>n&&u[i].test(z[n])))break;z[i]=z[n],z[n]=f(n),n=m(n)}w(),P.caret(Math.max(d,t))}}function b(t){var e,i,n,o;for(e=t,i=f(t);h>e;e++)if(u[e]){if(n=m(e),o=z[e],z[e]=i,!(h>n&&u[n].test(o)))break;i=o}}function k(){C(),P.val()!=B&&P.change()}function _(t,e){var i;for(i=t;e>i&&h>i;i++)u[i]&&(z[i]=f(i))}function w(){P.val(z.join(""))}function C(t){var e,i,n,o=P.val(),r=-1;for(e=0,n=0;h>e;e++)if(u[e]){for(z[e]=f(e);n++<o.length;)if(i=o.charAt(n-1),u[e].test(i)){z[e]=i,r=e;break}if(n>o.length){_(e+1,h);break}}else z[e]===o.charAt(n)&&n++,c>e&&(r=e);return t?w():c>r+1?s.autoclear||z.join("")===T?(P.val()&&P.val(""),_(0,h)):w():(w(),P.val(P.val().substring(0,r+1))),c?e:d}var P=t(this),z=t.map(i.split(""),function(t,e){return"?"!=t?l[t]?f(e):t:void 0}),T=z.join(""),B=P.val();P.data(t.mask.dataName,function(){return t.map(z,function(t,e){return u[e]&&t!=f(e)?t:null}).join("")}),P.one("unmask",function(){P.off(".mask").removeData(t.mask.dataName)}).on("focus.mask",function(){if(!P.prop("readonly")){clearTimeout(e);var t;B=P.val(),t=C(),e=setTimeout(function(){P.get(0)===document.activeElement&&(w(),t==i.replace("?","").length?P.caret(0,t):P.caret(t))},10)}}).on("blur.mask",k).on("keydown.mask",function(t){if(!P.prop("readonly")){var e,i,o,r=t.which||t.keyCode;g=P.val(),8===r||46===r||n&&127===r?(e=P.caret(),i=e.begin,(o=e.end)-i==0&&(i=46!==r?v(i):o=m(i-1),o=46===r?m(o):o),_(i,o),y(i,o-1),t.preventDefault()):13===r?k.call(this,t):27===r&&(P.val(B),P.caret(0,C()),t.preventDefault())}}).on("keypress.mask",function(e){if(!P.prop("readonly")){var i,n,o,s=e.which||e.keyCode,l=P.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||32>s)&&s&&13!==s){if(l.end-l.begin!=0&&(_(l.begin,l.end),y(l.begin,l.end-1)),i=m(l.begin-1),h>i&&(n=String.fromCharCode(s),u[i].test(n))){if(b(i),z[i]=n,w(),o=m(i),r){var c=function(){t.proxy(t.fn.caret,P,o)()};setTimeout(c,0)}else P.caret(o);l.begin<=p&&a()}e.preventDefault()}}}).on("input.mask paste.mask",function(){P.prop("readonly")||setTimeout(function(){var t=C(!0);P.caret(t),a()},0)}),o&&r&&P.off("input.mask").on("input.mask",function(){var t=P.val(),e=P.caret();if(g&&g.length&&g.length>t.length){for(C(!0);e.begin>0&&!u[e.begin-1];)e.begin--;if(0===e.begin)for(;e.begin<d&&!u[e.begin];)e.begin++;P.caret(e.begin,e.begin)}else{for(C(!0);e.begin<h&&!u[e.begin];)e.begin++;P.caret(e.begin,e.begin)}a()}),C()})}})});